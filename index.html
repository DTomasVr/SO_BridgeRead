<!DOCTYPE html>
<html>
  <head>
    <title>Venta ticket</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <!-- CSS de Bootstrap -->
    <link
      href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <!-- Tu archivo CSS personalizado -->
    <link rel="stylesheet" href="css/style.css" />
  </head>
  <body>
    <nav class="navbar navbar-expand-lg navbar-light bg-light">
      <a class="navbar-brand" href="#">BridgeRead</a>
      <button
        class="navbar-toggler"
        type="button"
        data-toggle="collapse"
        data-target="#navbarNav"
        aria-controls="navbarNav"
        aria-expanded="false"
        aria-label="Toggle navigation"
      >
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarNav">
        <ul class="navbar-nav">
          <li class="nav-item active">
            <a class="nav-link" href="index.html">Inicio</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="add_book.html">Agregar Libro</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="add_category.html">Agregar Categoria</a>
          </li>
        </ul>
      </div>
    </nav>

    <div class="container mt-4">
      <h2>List of Books</h2>
      <table id="books-table" class="table">
        <thead>
          <tr>
            <th>Title</th>
            <th>Author</th>
            <th>ISBN</th>
            <th>Description</th>
            <th>Price</th>
            <th>Quantity Available</th>
            <th>Genre</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>
    </div>

    <!-- Bootstrap JS -->
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.5.4/dist/umd/popper.min.js"></script>
    <!-- jQuery -->
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <!-- Bootstrap JS -->
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>

    <script>
      // Perform an AJAX request to fetch books from display_books.php
      $.ajax({
        url: "display_books.php",
        method: "GET",
        dataType: "json",
        success: function (response) {
          // Populate the table with books
          var tbody = $("#books-table tbody");
          $.each(response, function (index, book) {
            var row = $("<tr>");
            row.append($("<td>").text(book.title));
            row.append($("<td>").text(book.author));
            row.append($("<td>").text(book.ISBN));
            row.append($("<td>").text(book.description));
            row.append($("<td>").text(book.price));
            row.append($("<td>").text(book.quantity_available));
            row.append($("<td>").text(book.genre));
            tbody.append(row);
          });
        },
        error: function (xhr, status, error) {
          console.error("Error fetching books:", error);
        },
      });
    </script>
  </body>
</html>
